## Project Overview

PyEMD is a pure Python library for computing the Earth Mover's Distance using POT (Python Optimal Transport). Exposes three functions: `emd()`, `emd_with_flow()`, `emd_samples()`.

## Code Structure

```
src/pyemd/
├── __init__.py      # Python API, exports emd, emd_with_flow, emd_samples
├── emd.py           # Pure Python implementation using POT
└── _version.py      # Auto-generated by setuptools_scm
test/
└── test_pyemd.py    # pytest tests
```

## Build System

Uses **setuptools** (build backend) + **uv** (package manager). Config in `pyproject.toml`.

## Commands

```bash
# Setup
uv sync --all-extras

# Install in editable mode
uv pip install -e .

# Run tests
make test
# or: uv run pytest

# Clean build artifacts
make clean

# Build wheel
uv build --wheel
```

## Testing

Tests in `test/test_pyemd.py`. Run with `make test` or `uv run pytest`.

Test patterns:
- `emd_assert(got, expected)` - compare EMD values (5 decimal precision)
- `emd_flow_assert(got, expected)` - compare EMD + flow matrix
- Use `pytest.raises(ValueError)` for validation tests

## Changelog Fragments (MANDATORY)

**Create a towncrier fragment for every change** in `changelog.d/`:

```bash
# With issue number
echo "Description" > changelog.d/<issue-number>.<type>

# Without issue (+ prefix)
echo "Description" > changelog.d/+<short-name>.<type>
```

**Types:** `.feature`, `.bugfix`, `.doc`, `.removal`, `.misc`

**Guidelines:** One fragment per change, user perspective, past tense ("Added...", "Fixed...")

Preview: `uv run towncrier build --draft --version 0.0.0`

## Versioning

Git-based via setuptools_scm. Version derived from tags (e.g., `v0.5.2`).

## Key Dependencies

- Build: setuptools, setuptools_scm
- Runtime: numpy>=1.15.0, pot>=0.9.0
- Test: pytest
